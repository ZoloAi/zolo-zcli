<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Navigation Renderer Test - zCLI BifrostClient</title>
  
  <!-- zTheme CSS (CDN with cache-busting) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ZoloAi/zTheme@main/dist/ztheme.css?v=20251218">
  
  <!-- Bootstrap Icons (for hamburger menu) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  
  <style>
    /* ONLY body background - NO component styles! */
    body {
      background: #f8f9fa;
      min-height: 100vh;
    }
    
    /* Log styling (not for zTheme components) */
    #log {
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 0.875rem;
      max-height: 300px;
      overflow-y: auto;
    }
    .log-entry {
      padding: 0.25rem 0.5rem;
      border-bottom: 1px solid #e9ecef;
    }
    .log-success { color: #198754; }
    .log-error { color: #dc3545; }
    .log-info { color: #0d6efd; }
  </style>
</head>
<body>
  <!-- Main Container (zTheme) -->
  <div class="zContainer zMy-4">
    
    <!-- Header Card -->
    <div class="zCard zMb-4">
      <div class="zCard-body">
        <h1 class="zCard-title">Navigation Renderer Test</h1>
        <p class="zCard-text zText-muted">
          Phase 2, Step 2.3: Testing navigation rendering (FINAL RENDERER! ðŸŽ‰)
        </p>
      </div>
    </div>

    <!-- Test Controls Card -->
    <div class="zCard zMb-4">
      <div class="zCard-body">
        <h2 class="zCard-title zH5">Test Controls</h2>
        <div class="zD-flex zFlex-wrap zGap-2">
          <button class="zBtn zBtn-outline-primary" onclick="testNavbar()">Test Navbar</button>
          <button class="zBtn zBtn-outline-success" onclick="testNavbarWithBrand()">Navbar with Brand</button>
          <button class="zBtn zBtn-outline-info" onclick="testBreadcrumb()">Test Breadcrumb</button>
          <button class="zBtn zBtn-outline-warning" onclick="testSidebar()">Test Sidebar</button>
          <button class="zBtn zBtn-outline-danger" onclick="testAllNavTypes()">All Types</button>
          <button class="zBtn zBtn-outline-secondary" onclick="clearRenderZone()">Clear Zone</button>
        </div>
      </div>
    </div>

    <!-- Render Zone Card -->
    <div class="zCard zMb-4">
      <div class="zCard-body">
        <h2 class="zCard-title zH5">Render Zone</h2>
        <div id="render-zone" class="zBg-white">
          <!-- Navigation components will render here -->
          <p class="zText-muted zP-3"><em>Click a test button to render navigation...</em></p>
        </div>
      </div>
    </div>

    <!-- Log Card -->
    <div class="zCard">
      <div class="zCard-body">
        <h2 class="zCard-title zH5">Console Log</h2>
        <div id="log" class="zP-3 zBg-light zBorder zRounded">
          <!-- Logs will appear here -->
        </div>
      </div>
    </div>

  </div>

  <!-- Import NavigationRenderer (ES Module) -->
  <script type="module">
    import { NavigationRenderer } from '../src/rendering/navigation_renderer.js';
    
    // Mock logger that outputs to both console and log div
    const mockLogger = {
      log: (...args) => {
        console.log(...args);
        addLogEntry(args.join(' '), 'log-info');
      },
      warn: (...args) => {
        console.warn(...args);
        addLogEntry(args.join(' '), 'log-error');
      },
      error: (...args) => {
        console.error(...args);
        addLogEntry(args.join(' '), 'log-error');
      }
    };
    
    function addLogEntry(message, className = 'log-info') {
      const logDiv = document.getElementById('log');
      const entry = document.createElement('div');
      entry.className = `log-entry ${className}`;
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      logDiv.appendChild(entry);
      logDiv.scrollTop = logDiv.scrollHeight;
    }
    
    // Initialize NavigationRenderer
    const navRenderer = new NavigationRenderer(mockLogger);
    mockLogger.log('âœ… NavigationRenderer initialized (Primitives-First Refactor)');
    mockLogger.log('âœ… Using: createNav, createList, createListItem, createLink, createButton');
    mockLogger.log('âœ… FINAL RENDERER - 10/10 Complete!');
    mockLogger.log('Ready to test! Click a button above.');
    
    // Test functions
    window.testNavbar = function() {
      mockLogger.log('Testing navbar (basic)...');
      const zone = document.getElementById('render-zone');
      
      const items = ['Home', 'About', 'Services', 'Contact'];
      const navbar = navRenderer.renderNavBar(items, {
        theme: 'light',
        activeIndex: 0
      });
      
      zone.appendChild(navbar);
      mockLogger.log(`âœ… Rendered navbar with ${items.length} items`);
    };
    
    window.testNavbarWithBrand = function() {
      mockLogger.log('Testing navbar with brand...');
      const zone = document.getElementById('render-zone');
      
      const items = [
        { label: 'Dashboard', href: '/dashboard' },
        { label: 'Projects', href: '/projects' },
        { label: 'Settings', href: '/settings' }
      ];
      
      const navbar = navRenderer.renderNavBar(items, {
        theme: 'dark',
        brand: 'zCLI',
        activeIndex: 1
      });
      
      const wrapper = document.createElement('div');
      wrapper.className = 'zMb-4';
      wrapper.appendChild(navbar);
      zone.appendChild(wrapper);
      
      mockLogger.log(`âœ… Rendered navbar with brand and ${items.length} items`);
    };
    
    window.testBreadcrumb = function() {
      mockLogger.log('Testing breadcrumb...');
      const zone = document.getElementById('render-zone');
      
      const trail = ['Home', 'Projects', 'Web App', 'Settings'];
      const breadcrumb = navRenderer.renderBreadcrumb(trail, {
        separator: 'â€º'
      });
      
      const wrapper = document.createElement('div');
      wrapper.className = 'zP-3 zMb-3';
      wrapper.appendChild(breadcrumb);
      zone.appendChild(wrapper);
      
      mockLogger.log(`âœ… Rendered breadcrumb with ${trail.length} items`);
    };
    
    window.testSidebar = function() {
      mockLogger.log('Testing sidebar navigation...');
      const zone = document.getElementById('render-zone');
      
      const items = [
        'Overview',
        'Configuration',
        'Advanced',
        'Security',
        'Logs',
        'Help'
      ];
      
      const sidebar = navRenderer.renderSidebarNav(items, {
        activeIndex: 2
      });
      
      const wrapper = document.createElement('div');
      wrapper.className = 'zP-3';
      wrapper.appendChild(sidebar);
      zone.appendChild(wrapper);
      
      mockLogger.log(`âœ… Rendered sidebar with ${items.length} items`);
    };
    
    window.testAllNavTypes = function() {
      mockLogger.log('Testing all navigation types...');
      const zone = document.getElementById('render-zone');
      zone.innerHTML = '';
      
      // 1. Navbar
      const navbar = navRenderer.renderNavBar(['Home', 'Features', 'Docs', 'Community'], {
        theme: 'light',
        brand: 'zCLI'
      });
      zone.appendChild(navbar);
      
      // 2. Breadcrumb
      const breadWrapper = document.createElement('div');
      breadWrapper.className = 'zP-3';
      const breadcrumb = navRenderer.renderBreadcrumb(['Home', 'Documentation', 'Getting Started']);
      breadWrapper.appendChild(breadcrumb);
      zone.appendChild(breadWrapper);
      
      // 3. Sidebar (in a flex container to show side-by-side)
      const flexContainer = document.createElement('div');
      flexContainer.className = 'zD-flex zGap-3 zP-3';
      
      const sidebar = navRenderer.renderSidebarNav([
        'Dashboard',
        'Analytics',
        'Reports',
        'Settings'
      ], { activeIndex: 1 });
      
      const content = document.createElement('div');
      content.className = 'zFlex-grow-1 zBg-light zP-3 zRounded';
      content.innerHTML = '<p class="zText-muted">Main content area (sidebar navigation on left)</p>';
      
      flexContainer.appendChild(sidebar);
      flexContainer.appendChild(content);
      zone.appendChild(flexContainer);
      
      mockLogger.log('âœ… Rendered all navigation types: navbar, breadcrumb, sidebar');
    };
    
    window.clearRenderZone = function() {
      const zone = document.getElementById('render-zone');
      zone.innerHTML = '<p class="zText-muted zP-3"><em>Zone cleared. Click a test button...</em></p>';
      mockLogger.log('Render zone cleared');
    };
  </script>
</body>
</html>


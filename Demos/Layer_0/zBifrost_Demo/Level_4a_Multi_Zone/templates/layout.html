<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% if title %}
    <title>zBlog - {{ title }}</title>
    {% else %}
    <title>zBlog</title>
    {% endif %}

    <!-- zTheme will be auto-loaded by BifrostClient (autoTheme: true) -->
    
    <!-- Test: Flask-like /static/* convention -->
    <script src="/static/js/hello.js"></script>
</head>

<body>
    <header class="zNav">
        <div class="zContainer zNav-inner">
          <!-- Brand -->
          <a class="zNav-brand" href="/">zBlog</a>
      
          <!-- Main nav links -->
          <nav class="zNav-links" aria-label="Main navigation">
            <a href="/" class="zNav-link is-active">Home</a>
            <a href="/about" class="zNav-link">About</a>
          </nav>
      
          <!-- Mobile toggle -->
          <button class="zNav-toggle" id="zNavToggle" type="button" aria-expanded="false" aria-controls="zNavMenu">
            â˜°
          </button>
        </div>
      
        <!-- Mobile menu (reuses same links structure if you prefer) -->
        <nav class="zNav-menu" id="zNavMenu" aria-label="Mobile navigation">
          <a href="/" class="zNav-link is-active">Home</a>
          <a href="/about" class="zNav-link">About</a>
        </nav>
      </header>
      
    <main class="zContainer">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Simple zNav mobile toggle -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggle = document.getElementById('zNavToggle');
            const menu = document.getElementById('zNavMenu');
            if (!toggle || !menu) return;

            toggle.addEventListener('click', () => {
                menu.classList.toggle('nav-is-open');
            });
        });
    </script>

    <!-- BifrostClient from local static folder (dev mode) -->
    <script src="/static/client/src/bifrost_client.js"></script>

    <!-- Production CDN (commented out during dev): -->
    <!-- <script src="https://cdn.jsdelivr.net/gh/ZoloAi/zolo-zcli@f86b2abd9cab149a6163de826e4b27b90afbdc7f/zCLI/subsystems/zComm/zComm_modules/bifrost/client/src/bifrost_client.js" crossorigin="anonymous"></script> -->

    <!-- WebSocket Connection Setup -->
    <script>
        (function () {
            'use strict';

            const client = new BifrostClient('ws://127.0.0.1:8765', {
                debug: true,
                autoTheme: true,  // Auto-load zTheme from /static/client/
                hooks: {
                    onConnected: (info) => {
                        console.log('âœ… Connected to zBifrost server', info);
                    },

                    onDisconnected: (reason) => {
                        console.log('âŒ Disconnected from zBifrost server', reason);
                    },

                    onDisplay: (event) => {
                        console.log('ðŸ“¨ zDisplay event:', event);
                    },

                    onError: (error) => {
                        console.error('âš ï¸ WebSocket error:', error);
                    }
                }
            });

            client.connect().catch(error => {
                console.error('Failed to connect:', error);
            });

            // Expose globally for debugging
            window.bifrostClient = client;

        })();
    </script>
</body>

</html>